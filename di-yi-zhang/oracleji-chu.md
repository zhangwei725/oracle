# 数据库基础概念

## 一、数据库简介\(了解\)

### 1.1、数据库的发展史\(了解\)

**数据库发展可以分为三个阶段**

#### 1.1.1、人工管理阶段

```
数据库的历史可以追溯到六十年前，那时的数据管理非常简单。通过大量的分类、比较和表格绘制的机器运行数百万穿孔卡片来进行数据的处理，
其运行结果在纸上打印出来或者制成新的穿孔卡片。而数据管理就是对所有这些穿孔卡片进行物理的储存和处理
1951 年雷明顿兰德公司（Remington Rand Inc.）的一种叫做Univac I 的计算机推出了一种一秒钟可以输入数百条记录的磁带驱动器
注意:穿孔卡和磁带只能顺序存取数据
```

#### 1.1.2、文件系统阶段

```
1956 年IBM生产出第一个磁盘驱动器—— the Model 305 RAMAC。此驱动器有50 个盘片，每个盘片直径是2 英尺，可以储存5MB的数据。
使用磁盘最大的好处是可以随机地存取数据
```

#### 1.1.3、数据库管理阶段

​ 后来60年代的时候,随着计算机广泛的应用,对数据管理和共享要求越来越高,传统的文件系统已经无法满足我们的需求了,这个时候能够统一的管理和共享数据的数据库管理系统应用而生\(DataBase Managerment System\)那数据库系统的核心和基础什么呢?也就是我们如何设计这个数据库系统--数据模型

##### 1.1.3.1、数据模型

1. 什么是数据模型?

   ```
   1、数据是描述事物的一个符号,
   2、模型就是现实世界的一个抽象
   ```

2. 数据模型 又由三部分组成

   ```
   1.数据结构:主要是描述数据的类型,内容,以及他们数据之间的联系
   2.数据操作:主要是对数据结构进行操作(类型的操作,内容的操作)
   3.数据约束:主要是对数据结构间的数据的语法,内容以及依存关系的约束.以及数据动态变化的规则,以保证数据的正确性,有效性
   ```

##### 1.1.3.2 发展历程

1. 1961年通用电气开发成功了第一个网型数据结构DBMS系统 IDS,并且得到了广泛的应用 但缺点只能在GE的主机上运行,而且数据库的所有表必须手工编码来生成,虽然网状数据模型对层级和非层级能模拟,但是对一些复杂的层级结构的描述不是很清晰,这个时候基于层级结构的数据库模型的数据库就出现了,

2. 1968年，美国IBM公司推出层次模型的IMS（Information Management System）系统，硬盘使用系统。这也是IBM推出的一个重量级的产品,与网状数据模型的数据库同时存在,但网状数据模型的数据库系统占主流

3. 1969年，美国CODASYL（Conference On Data System Language）组织发布了DBTG（Data Base Task Group）报告，总结了当时各式各样的数据库，提出网状模型。

4. 1970年，美国IBM公司的Edgar F.Codd博士连续发表论文，提出关系模型，奠定了关系型数据库的理论基础。Codd也获得了声望很高的ACM图灵奖。

5. 1990年以后，数据库进入了高级应用阶段。面向对象的数据库技术、开放数据库互联技术、数据仓库（大数据）和数据挖掘技术的应用日益广泛

### 1.2、什么DB和DBMS\(了解\)

#### 1.2.1、DB数据库

##### 1.2.1.1、定义

```
全称Data Base,是长期存储在计算机内，有组织的，统一管理的相关数据的集合
```

##### 1.2.1.2、数据库的常用应用场景

1. 销售：用于存储客户、产品和购买信息等

2. 会计：用于存储付款、收据、账户余额、资产和其他会计信息

3. 人力资源：用于存储雇员、工资、所得税和津贴的信息，以及产生工资单等

4. 银行业：用于存储客户信息、账户、贷款以及银行的交易记录

5. 信用卡交易：用于记录信用卡消费的情况和产生每月清单

#### 1.2.2、DBMS\(数据库管理系统\)

1.2.2.1、定义

```
全称DataBase Management System数据库管理系统,是指数据库系统中对数据进行管理的软件系统，它是数据库系统的核心组成部分。可以通过DBMS对DB进行定义、查询、更新及各种控制数据库管理系统（DBMS）是与用户，其他应用程序和数据库本身来捕获和分析数据进行交互的计算机软件应用程序
```

### 1.3、主流数据库分类\(掌握\)

#### 1.3.1、关系型

##### 1.3.1.1、定义

​ 关系型数据库以行和列的形式存储数据，行和列组成二维表，表与表之间的数据记录有关系,很多二维表又组成一个数据库,

##### 1.3.1.2、关系模型

1. 关系

   ```
   可以理解为一张二维表，每个关系都具有一个关系名，就是通常说的表名
   ```

2. 元组

   ```
   可以理解为二维表中的一行，在数据库中经常被称为记录
   ```

3. 属性

   ```
   可以理解为二维表中的一列，在数据库中经常被称为字段
   ```

4. 域

   ```
   属性的取值范围，也就是数据库中某一列的取值限制
   ```

5. 关键字

   ```
   一组可以唯一标识元组的属性，数据库中常称为主键，由一个或多个列组成
   ```

6. 关系模式

   ```
   指对关系的描述。其格式为：关系名(属性1，属性2， ... ... ，属性N)，在数据库中成为表结构
   ```

##### 1.3.1.3、分类

1. 大型数据库：IBM DB2、Oracle、Sybase

2. 中型数据库：SQL Server、MySQL、Informix、PostgreSQL

3. 小型数据库：Access、Visual FoxPro、SQLite

#### 1.3.2、非关系型\(NOSQL\)

##### 1.3.2.1、概要

​ 随着web2.0的快速发展，非关系型、分布式数据存储得到了快速的发展，它们不保证关系数据的ACID特性。NoSQL概念在2009年被提了出来。NoSQL最常见的解释是“non-relational”，“Not Only SQL”也被很多人接受。（“NoSQL”一词最早于1998年被用于一个轻量级的关系数据库的名字）NoSQL被我们用得最多的当数key-value存储，当然还有其他的文档型的、列存储、图型数据库、xml数据库等。在NoSQL概念提出之前，这些数据库就被用于各种系统当中，但是却很少用于web互联网应用。

##### 1.3.2.2、分类

| **分类** | **Examples举例** | 典型应用场景 | 数据模型 | 优点 | 缺点 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **键值（key-value）** | Tokyo Cabinet/Tyrant, Redis, Voldemort, Oracle BDB | 内容缓存，主要用于处理大量数据的高访问负载，也用于一些日志系统等等。 | Key 指向 Value 的键值对，通常用hash table来实现 | 查找速度快 | 数据无结构化，通常只被当作字符串或者二进制数据 |
| **列存储数据库** | Cassandra, HBase, Riak | 分布式的文件系统 | 以列簇式存储，将同一列数据存在一起 | 查找速度快，可扩展性强，更容易进行分布式扩展 | 功能相对局限 |
| **文档型数据库** | CouchDB, MongoDb | Web应用（与Key-Value类似，Value是结构化的，不同的是数据库能够了解Value的内容） | Key-Value对应的键值对，Value为结构化数据 | 数据结构要求不严格，表结构可变，不需要像关系型数据库一样需要预先定义表结构 | 查询性能不高，而且缺乏统一的查询语法。 |
| **图形\(Graph\)数据库** | Neo4J, InfoGrid, Infinite Graph | 社交网络，推荐系统等。专注于构建关系图谱 | 图结构 | 利用图结构相关算法。比如最短路径寻址，N度关系查找等 | 很多时候需要对整个图做计算才能得出需要的信息，而且这种结构不太好做分布式的集群方案。 |

##### 1.3.2.3、应用场景

1. 对数据库高并发读写的需求

2. 对海量数据的高效率存储和访问的需求

3. 对数据库的高可扩展性和高可用性的需求

#### 1.3.2、对比

##### 1.3.2.1、优点：

1. 成本：nosql数据库简单易部署，基本都是开源软件，不需要像使用oracle那样花费大量成本购买使用，相比关系型数据库价格便宜。

2. 查询速度：nosql数据库将数据存储于缓存之中，关系型数据库将数据存储在硬盘中，自然查询速度远不及nosql数据库。

3. 存储数据的格式：nosql的存储格式是key,value形式、文档形式、图片形式等等，所以可以存储基础类型以及对象或者是集合等各种格式，而数据库则只支持基础类型。

4. 扩展性：关系型数据库有类似join这样的多表查询机制的限制导致扩展很艰难。

##### 1.3.2.2、缺点：

1. 维护的工具和资料有限，因为nosql是属于新的技术，不能和关系型数据库10几年的技术同日而语。

2. 不提供对sql的支持，如果不支持sql这样的工业标准，将产生一定用户的学习和使用成本。

3. 不提供关系型数据库对事物的处理。

## 二、ORACLE发展史\(了解\)

### 2.1、简介

1. 所有这一切要从IBM的一篇论文谈起，1970年的6月，IBM公司的研究员埃德加·考特 （Edgar Frank Codd） 在 Communications of ACM 上发表了那篇著名的《大型共享数据库数据的关系模型》（A Relational Model of Data for Large Shared Data Banks）的论文。这是数据库发展史上的一个转折。要知道，当时还是层次模型和网状模型的数据库产品在市场上占主要位置。从这篇论文开始，拉开了关系型数据库软件革命的序幕。

2. IBM虽然1973年就启动了System R的项目来研究关系型数据库的实际可行性，也没有及时推出这样的产品，因为当时IBM的的IMS（著名的层次型数据库）市场不错，如果推出关系型数据库，牵涉到IBM很多人的自身利益。再者，IBM庞大复杂的官僚机构处在决策上远不那么灵活

3. 1977年6月，Larry Ellison\(拉里·埃里森\)与Bob Miner\(鲍勃·迈纳\)和Ed Oates\(埃德·奧茨\)在硅谷共同创办了一家名为软件开发实验室（Software Development Laboratories，SDL）的计算机公司（ORACLE公司的前身）。那个时候，32岁的Larry Ellison，这个读了三家大学都没能毕业的辍学生，还只是一个普通的软件工程师。公司创立之初，Miner是总裁，Oates为副总裁，而Ellison，因为一个合同的事情，还在另一家公司上班。没多久，第一位员工Bruce Scott，就是这个Scott.,Oates最先看到了埃德加·考特的那篇著名的论文连同其他几篇相关的文章并推荐Ellison和Miner也阅读一下。Ellison和Miner预见到数据库软件的巨大潜力 于是，SDL开始策划构建可商用的关系型数据库管理系统（RDBMS）。

4. 根据Ellison和Miner他们在前一家公司从事的一个由中央情报局投资的项目代码,他们把这个产品命名为ORACLE。因为他们相信，ORACLE（字典里的解释有“神谕, 预言”之意）是一切智慧的源泉。1979年，SDL更名为关系软件有限公司（Relational Software，Inc.，RSI），毕竟“软件开发实验室”不太像一个大公司的名字。1983年，为了突出公司的核心产品，RSI再次更名为ORACLE。Oracle从此正式走入人们的视野。

### 2.2、版本介绍

1. 1997年，Oracle8发布，提高了数据库的性能和可扩展性，并且增加了在数据库创建和存储对象的功能。

2. 1999年，Oracle8i发布，是Oracle数据库的一个新的里程碑，整体性能的提高使得Oracle8i成为全球因特网计算的焦点。

3. 2001年，Oracle9i发布，引入了实时应用集群，取代Oracle并行服务器，并增加了许多管理特性和数据仓库特性。

4. 2003年，Oracle10g发布，开始支持部署网格计算。简单的说，

5. 网格就是一个根据需要为应用程序提供资源的由计算机和软件资源组成的池。

6. 2007年，Oracle11g发布，在这个版本中，许多数据库自我调整和自我管理功能得到进一步改进，尤其是在自动化内存管理，分区和安全等方面。

7. 2013年，Oracle12c发布,“c”指cloud 云的意思。最新版本，对云服务的支持。初学者不建议使用该版本。安装配置相对复杂

## 四、Oracle的安装与卸载\(掌握\)

### 4.1、安装\(见附件\)

### 4.2、 卸载

1. 关闭oracle所有的服务。可以在windows的服务管理器中关闭；

2. 打开注册表：regedit打开路径：HKEY\_LOCAL\_MACHINE\SYSTEM\CurrentControlSet\Services\删除该路径下的所有以oracle开始的服务名称，这个键是标识Oracle在windows下注册的各种服务！

3. 打开注册表，找到路径：HKEY\_LOCAL\_MACHINE\SOFTWARE\ORACLE删除该oracle目录，该目录下注册着Oracle数据库的软件安装信息。

4. 删除注册的oracle事件日志，打开注册表HKEY\_LOCAL\_MACHINE\SYSTEM\CurrentControlSet\Services\Eventlog\Application删除注册表的以oracle开头的所有项目。

5. 删除环境变量path中关于oracle的内容。

6. 鼠标右键右单击“我的电脑&gt;属性&gt;高级&gt;环境变量 PATH变量。删除Oracle在该值中的内容。

   1. 注意:path中记录着一堆操作系统的目录，在windows中各个目录之间使用分号（;）隔开的，删除时注意。

   2. 建议：删除PATH环境变量中关于Oracle的值时，将该值全部拷贝到文本器中，找到对应的Oracle的值，删除后，再拷贝修改的串，粘贴到PATH环境变量中，这样相对而言比较安全。

7. 重新启动操作系统。以上1~5个步骤操作完毕后，重新启动操作系统。

8. 重启操作系统后各种Oracle相关的进程都不会加载了。这时删除Oracle\_Home下的所有数据。（Oracle\_Home指Oracle程序的安装目录）

9. 删除C:\ProgramFiles下oracle目录。

10. 删除C:\ProgramData下oracle目录。\(该目录一般隐藏\)（该目录视Oracle安装所在路径而定）

11. 删除开始菜单下oracle项，如：C:\DocumentsandSettings\AllUsers\「开始」菜单\程序\Oracle-Ora10g。

12. 最后在 命令行输入 lusrmgr.msc 进入用户/组 管理界面。删掉Oracle创建的用户。

13. 大功告成！！！！

### 4.3 、服务介绍\(了解\)

1. OracleOraDB10\_home1TNSListener：Oracle监听服务，如果有客户端需要连接到数据库，此服务必须打开。

2. OracleServiceORCL：Oracle数据库的主服务，此服务的必须启动才能使用Oracle

3. OrcaleDBConsoleorcl：Oracle数据库控制台，如果你需要用浏览器来使用oracle企业管理器，那么就启动这个服务。一般不需要开启。

4. OracleJobSchedulerORCL：Oracle job定时器的功能，一般不需要开启。

5. OracleOraDB10\_home1iSQLPlus：Oracle iSQLPlus服务，只有在Web页面中要使用iSQLPlus时候才需要启动。一般不需要开启。

## 五、什么是Oracle数据库?\(了解\)

### 概要

Oracle DataBase是由两个部分组成

1. **实例：实例是数据库启动时初始化的一组进程和内存结构**

2. **数据库：数据库则指的是用户存储数据的一些物理文件**

### 5.1、数据库结构

![](http://opzv089nq.bkt.clouddn.com/17-7-29/30503267.jpg)

### 5.2、内存结构

![](http://opzv089nq.bkt.clouddn.com/17-7-29/26620472.jpg)

5.2.1内存结构

1. 说明

​oracle实例内存结构由两部分组成SGA\(系统全局区\)和PGA\(用户全局区\)组成，SGA是一块共享的内存区域，也是最大的一块内存区域；PGA则是用户会话专有的内存区域，每个会话在服务器端都有一块专有的内存区域就是PGA

1. SGA\(SYSTEM Global Area \)系统全局区。

   **SGA是Oracle用来为实例存储数据和控制信息的共享内存区。**SGA在启动Oracle实例时被分配，在关闭Oracle实例时被释放。 每个启动的Oracle实例都有自己的SGA。 SGA中的信息由数据库缓冲区、重做日志缓冲区和共享池\(shared pool）等部分构成，每个部分都在实例启动时创建，而且大小都是固定的。

   ![](http://opzv089nq.bkt.clouddn.com/17-7-29/75440067.jpg)

2. PGA （ Program Global Area ）程序全局区

   是一块包含一个服务进程的数据和控制信息的内存区域。它是Oracle 在一个服务进程启动是创建的，是非共享的。一个 Oracle 进程拥有一个 PGA 内存区。一个 PGA 也只能被拥有它的那个服务进程所访问，只有这个进程中的 Oracle 代码才能读写它。因此， PGA 中的结构是不需要Latch 保护的。我们可以设置所有服务进程的 PGA 内存总数受到实例分配的总体 PGA （ Aggregated PGA ）限制。

### 5.3、进程结构

![](http://opzv089nq.bkt.clouddn.com/17-7-29/33733664.jpg)

1. 用户进程：在数据库用户请求连接到Oracle 服务器时启动

2. 服务器进程：可以连接到Oracle实例，它在用户建立会话时启动

3. 后台进程：再启动Oracle实例时启动

### 5.4、Oracle实例管理

![](http://opzv089nq.bkt.clouddn.com/17-7-29/22610090.jpg)

1. 系统监视器（SMON）：出现故障后启动实例时执行崩溃恢复任务

2. 进程监视器（PMON）：用户进程失败时执行进程清理任务

3. 数据库写进程（DBWn）：将修改后的块从数据库缓冲区高速缓存写入磁盘中的数据文件

4. 检查点（CKPT）：通过更新数据库的所有数据文件和控制文件指出最新的检查点

5. 日志写进程（LGWR）：将重做日志条目写入磁盘

6. 归档进程（ARCn）：发生日志切换时将重做日志文件复制到归档存储器

### 5.5、数据库物理存储结构

#### 5.5.1、概要

​ Oracle存储结构将分别从物理存储结构和逻辑存储结构两个维度来进行阐述

#### 5.5.2、物理存储结构

1. 结构图

2. 说明

   **控制文件：**

   控制文件虽小，但作用重大，它包含指向数据库其余部分的指针（包括重做日志文件，数据文件，归档日志文件等的位置），存储重要的序列号和时间戳，存储RMAN备份的详细信息。控制文件一旦受损，那实例会立马终止，一般对数据文件的保护采用多路复用机制，就是冗余多份在不同物理位置。

   **重做日志文件**

   重做日志文件的作用在讲解内存和进程结构的时候有提到过，重做日志按时间顺序存储应用于数据库的一连串的变更向量（包含联机重做日志文件和归档日志文件）。由SMON在数据库启动时自动执行的实例恢复 和 磁盘损坏所要求的提取备份恢复都会应用到重做日志进行相应的数据恢复

   重做日志文件也建议进行多路复用，一个数据库至少要有两组重做日志文件。一组供LGWR进行写入，日志文件是固定大小，业务高峰期会很快写满，写满之后会切换到第二组上，在配置为归档模式的数据库中，这时由归档进程（ARCn）开始将第一组的内容进行归档备份，如此循环地进行写入和归档。需要注意的是，在归档进程还未对当前组的日志归档完毕前，是不允许LGWR对其进行重写的。

   **数据文件**

   数据文件存储着实际的数据，DBWn会将数据库缓冲区中的内容写入到这类文件中去，数据文件的大小和数量是不受限制的。Oracle从10g开始，创建一个数据库至少需要两个数据文件，一个用于SYSTEM表空间，该表空间用来存储数据字典；一个用于SYSAUX表空间，这个表空间用来存储一些数据字典的辅助数据。

   数据文件由一个个的Oracle块组成，这是Oracle的I/O基础单元，与操作系统块是不同的概念，Oracle块要比操作系统块大，这当然有处于性能的一些考虑，但我们考虑这样一种情况，当用户使用操作系统命令进行数据文件的备份的时候（假设1个Oracle块=8个操作系统块），已经复制了4个操作系统块，然后CPU被DBWn抢占了，DBWn又重新对这个Oracle块进行了更新，这时，当复制命令又得到了CPU时间去复制剩余的4个块的时候，就造成了整个Oracle块的数据不一致，所以，这也是在执行这种备份（用户自行备份）的时候，需要做一些额外处理，比如将表空间置为备份模式的原因。当然，使用RMAN是不存在这样的问题的，RMAN的备份机制是肯定可以得到数据一致的块的。（这块内容作了解即可）

   对于数据文件的保护，一般可进行定期备份，或者使用RAID也可以。

   **实例参数文件**

   这个文件存储了数据库所需的一些参数设置，比如各个内存区域的大小，可允许的最大进程数，最大会话数，控制文件的位置，数据库的名称等等，参数文件也是实例启动时首先要加载的文件。

   **口令文件**

   一般称为外部口令文件。一般的用户名和口令是存放在数据字典中，不会存放在这个文件中。在一些特殊场景下，比如实例还未启动，这时，我可能需要以管理员的身份登入系统去执行一些恢复或者启动操作，然而此时，数据字典由于实例还没启动是不存在的，这时就需要外部口令文件进行用户身份的验证。

   **归档日志文件**

   ARCn将联机重做日志文件会备份归档到这类文件中去，归档日志文件保留了数据更改的完整历史信息

#### 5.5.3、逻辑存储结构

1. 概要

   Oracle将其物理结构从逻辑存储结构中抽象出来，物理机构是系统管理员能看到的，逻辑结构则是用户所能感知到的。oracle数据库的逻辑结构包括方案**\(schema\)对象**,数据块\(Date block\),区间\(Extent\),段\(Segment\),和表空间\(Tablespace\)等.

2. 结构图

   ![](http://opzv089nq.bkt.clouddn.com/17-7-29/19619495.jpg)

   ![](http://opzv089nq.bkt.clouddn.com/17-7-29/35736369.jpg)

3. 说明

   1、**表空间\(TableSpace\)**:

   3、**段:**

   ​ 段用于存储表空间中某一种特定的、具有独立存储结构的数据库对象的数据，它有一个或多个连续的区组成。当创建表、索引、簇等对象时，oracle就会为这些对象分配存储空间（即段），以便存储它们的数据。按照段中所存储的数据的特征、用途不同，可以分为以下几种：

   | **段类型** | **名称** |
   | :--- | :--- |
   | **Table**表段（数据段） | 存储表中的所有数据 |
   | **Index**索引段 | 存储表上最佳查询方式d的所有索引数据 |
   | Temporary 临时段 | 存储表排序操作期间建立的临时表的所有数据 |
   | **Rollback**回退段 | 存储修改之前的位置和值是Oracle的撤销机制 |

   4、**区**

   ​ 区是由物理上连续存放的块所组成的。区 是oracle存储分配的最小单位。一个或多个块组成区，一个或多个区组成段。一个区只能属于一个数据文件

   5、**块:**

   ​ 块是数据库使用的IO最小单元，又称为逻辑块或Oracle块,一个数据库块对应一个或者多个物理块，大小由参数DB\_BLOCK\_SIZE,数据块的结构包括块头和存储区的两个部分块头,存储区

### 5.5、完整体系结构图

![](http://opzv089nq.bkt.clouddn.com/17-7-29/86611471.jpg)

## 六、开发重要知识点介绍

### 6.1、Oracle开发工具

1. SQL\*Plus\(前期学习用,开发中不用\)

   是Oracle自带的管理工具，在上一节中命令行便是调用了该工具。当然，这个工具也可以在开始菜单中找到，直接打开。请注意登录的时候，无法用sys登录

2. Oracle SQL Developer\(推荐\)

   [官方网址](http://www.oracle.com/technology/software/products/sql/index.html)

   ```
    说明：Oracle公司出的管理软件，算是官方管理软件吧！只支持Oracle数据库
   ```

3. Navicat Premium \(推荐\)

   [官方网址](http://www.navicat.com)

   ```
     说明：个人现在的最爱，软件小巧，速度快捷，是一个集成数据库管理软件，可以管理MySQL、Oracle、PostgreSQL等主流数据库。
   ```

### 6.2、数据库

1. 简介

   数据库是数据集合。Oracle是一种数据库管理系统，是一种关系型的数据库管理系统。

   通常情况了我们称的“数据库”，并不仅指物理的数据集合，他包含物理数据、数据库管理系统。也即物理数据、内存、操作系统进程的组合体。

2. 全局数据库名

   就是一个数据库的标识，在安装时就要想好，以后一般不修改，修改起来也麻烦，因为数据库一旦安装，数据库名就写进了控制文件，数据库表，很多地方都会用到这个数据库名。

3. 启动数据库：

   也叫全局数据库，是数据库系统的入口，它会内置一些高级权限的用户如SYS，SYSTEM等。我们用这些高级权限账号登陆就可以在数据库实例中创建表空间，用户，表了。

4. 查询当前数据库名：

   ```
   select name from v$database;
   ```

### 6.3、数据库实例

1. 概要

   官方描述实例是访问Oracle数据库所需的一部分计算机内存和辅助处理后台进程，是由进程和这些进程所使用的内存\(SGA\)所构成一个集合.其实就是用来访问和使用数据库的一块进程。它只存在于内存中。就像Java中new出来的实例对象一样。

   我们访问Oracle都是访问一个实例，但这个实例如果关联了数据库文件，就是可以访问的，如果没有，就会得到实例不可用的错误。

   实例名指的是用于响应某个数据库操作的数据库管理系统的名称。她同时也叫SID。实例名是由参数instance\_name决定的

2. 查询当前数据库实例名:就是数据库安装的时候设置的名字默认是orcl

   ```
   select instance_name from v$instance;
   jdbc:oracle:thin:@localhost:1521:orcl（orcl就为数据库实例名）
   ```

   注:一个数据库可以有多个实例，在作数据库服务集群的时候可以用到

### 6.4、表空间\(TableSpace\)

#### 6.4.1、概要

表空间是最大的存储结构，它对应一个或多个数据文件，表空间的大小是它所对应的数据文件大小的总和，Oracle推荐将不同数据文件放进不同的表空间，一方面可以提高数据访问性能，另一个方面便于数据管理，备份，恢复操作,一个数据库实例可以有N个表空间，一个表空间下可以有N张表,用户可以自己去创建,不指定系统默认创建,

#### 6.4.2、主要作用

1. 控制数据库数据磁盘分配:表空间可以拥有多个数据文件，然而数据文件可以存储在不同的磁盘中，从而达到了控制数据磁盘分配的目的

2. 限制用户在表空间中可以使用的磁盘空间大小

#### 6.4.3、常见表空间分类

| 名称 | 作用 |
| :--- | :--- |
| System系统表空间 | 存放关于表空间的名称，控制文件，数据文件等管理信息 |
| Temp临时表空间 | 存放临时表和临时数据 |
| Users用户表空间 | 存放对应的用户的表 |
| Experience示例表空间 | 用于存放我们安装Oracle时候创建的示例用户模式的数据信息 |

#### 6.4.4、创建表空间语法

1. 语法

   ```
   Create TableSpace 表空间名称  
   DataFile 
     表空间数据文件路径  
   Size 
     表空间初始大小  
   Autoextend on
   ```

2. 示例代码

   ```
   create tablespace db_test  
   datafile 'D:\oracle\zhangwei\product\11.2.0\dbhome_1\userdata\db_test.dbf'  
   size 50m  
   autoextend on;
   ```

3. 查看已经创建好的表空：

   ```
   select default_tablespace, temporary_tablespace, d.username  
   from dba_users d
   ```

### 6.5、Oracle用户

#### 6.5.1、概要

详细内容查看附件Oralce用户管理

Oracle数据库建好后，要想在数据库里建表，必须先为数据库建立用户，并为用户指定表空间,

#### 6.5.2、创建用户

1. 语法

   ```
   CREATE USER 用户名  
   IDENTIFIED BY 密码  
   DEFAULT TABLESPACE 表空间(默认USERS)  
   TEMPORARY TABLESPACE 临时表空间(默认TEMP)
   ```

2. 示例代码：

   ```
   CREATE USER test  
   IDENTIFIED BY 123  
   DEFAULT TABLESPACE db_test  
   TEMPORARY TABLESPACE temp;
   ```

3. 有了用户，要想使用用户账号管理自己的表空间，还得给它分权限：

   ```
   GRANT CONNECT TO test;  
   GRANT RESOURCE TO test;  
   GRANT dba TO test;--dba为最高级权限，可以创建数据库，表等。
   ```

4. 查看数据库用户：

   ```
   select  * from dba_users;
   ```

### 6.6、表

#### 6.6.1 、定义

表示关系型数据库中基本的数据结构，它是行的集合。表中的每一行包含一个或者多个列，而表中的一行数据可以理解为数据库中的一个记录

#### 6.6.2、示例图

![](http://opzv089nq.bkt.clouddn.com/17-7-29/83631486.jpg)

有了数据库，表空间和用户，就可以用自定义的用户在自己的表空间创建表了。有了表，我们可以开发了。

## 七、SQL

### 7.1、 简介

1. SQL 全名是结构化查询语言（Structured Query Language）

   ```
   是用于数据库中的标准数据查询语言， IBM公司最早使用在其开发的数据库系统中。 198610 月，美国ANSI(美国国家标准化组织) 对 SQL 进行规范后，以此作为关系式数据库管理系统的标准语言 (ANSI X3. 135-1986)，得到 的支持下成为国际 。不过各种通行的数据库系统在其实践过程中都对SQL规范作了某些编改和扩充。所以，实际上不同数据库系统之间的 SQL 语言不能完全相互通用
   ```

2. 什么是SQL

   ```
   是一种ANSI(美国国家标准化组织)的标准计算机语言
   SQL 语句是一种特殊的编程语言,是面向数据库的语言
   是我们有能力访问数据库
   ```

3. 为什么会有SQL?

   在70年代末的时候，世界上就已经存在_**七八十**_种数据库，而每一种数据库都有属于自己的一套数据库操作命令。这样就显得让开发者从A数据库过度到B数据库增加了难度，甚至要重新学习一套新的操作命令。

   就在那个时候，IBM公司开发出了SQL数据库操作命令标准，而Oracle数据库是世界最早支持SQL标准的数据库。从那之后，大多数公司都支持SQL语法，大部分都是在各自原有的操作命令的基础上，再兼容一套SQL语法。直到现在，基本上所有的关系型数据库都支持SQL语法

4. SQL的作用

   ```
   1> 面向数据库执行的查询
   2> 可以从数据库取回数据库
   3> 可以向数据库中插入新的记录
   4> 可以更新数据库中的记录
   5> 可以从数据库中删除记录
   6> 可以创建新的数据库
   7> 可以在数据库中创建新表
   8> 可以在数据库中创建存储过程
   9> 可在数据库中创建视图
   10>可以设置表,存储过程和视图的权限
   ```

### 7.2、分类

#### 7.2.1、DDL\(重点\)

##### 7.2.1.1、定义

\(Data Definition Language 数据定义语言\)： 用于定义数据的结构，比如 创建、修改或者删除数据库对象注意:DDL只是对我们的表的属性\(列名\)进行操作,不会的对具体的数据进行操作\(也就是行\).

##### 7.2.1.2、主要操作

1. CREATE

   1、作用：

   ```
   可以创建数据库和数据库的一些对象。
   ```

2. DROP

   1、作用：

   ```
   可以删除数据表、索引、触发程序、条件约束以及数据表的权限等。
   ```

3. ALTER

   1、作用：

   ```
   修改数据表定义及属性
   ```

##### 7.2.1.3、操作对象\(表\)

#### 7.2.2、DML\(重点\)

##### 7.2.2.1、定义

\(Data Manipulation Language 数据操控语句\)主要是用于操作数据库对象中包含的数据

##### 7.2.2.2、主要操作

1. select\(重要的无法描述\)

   1、作用

   ```
   查询数据库数据
   ```

   2、示例代码

   ```
   ​
   ```

2. insert

   1、作用

   ```
   向数据库表中插入一条记录
   ```

   2、示例代码

   ```
   ​
   ```

3. update

   1、作用

   ```
   用于修改已经存在的表中记录的内容
   ```

   2、示例代码

   ```
   ​
   ```

4. delete

   1、作用

   ```
   用于删除表中的一条或多条记录,也可以删除数据库表中的所有记录(危险操作,开发中慎用,一般都是假删除)
   ```

   2、示例代码

   ```
   ​
   ```

##### 7.2.2.3、操作对象\(记录\)

#### 7.2.3、DCL

##### 7.2.3.1、定义

​ 全称\(Data Control Language\)翻译成中文 数据控制语句 主要的操作是数据库对象授权，角色控制，这些操作的确定使数据更加的安全

##### 7.2.3.2、主要操作

1. GRANT

   1、作用

   ```
   允许对象的创建者给某用户或某组或所有用户（PUBLIC）某些特定的权限。
   ```

   2、示例代码

   ```

   ```

2. REOVKE

   1、作用

   ```
   废除某用户或某组或所有用户访问权限
   ```

   2、示例代码

   ```

   ```

##### 7.2.3.3、操作对象\(用户\)

#### 7.2.4、TCL

##### 7.2.4.1、定义

​ 全称（Transaction Control Language）翻译成中文 事务控制语言,事务是访问并可能更新数据库各种数据项的一个程序执行单元

##### 7.2.4.2、主要操作

1. CREATE

   1、作用

   ```
   设置保存点
   ```

   2、示例代码

   ```

   ```

2. ROLLBACK

   1、作用

   ```
   回滚
   ```

   2、示例代码

   ```

   ```

3. SET TRANSACTION

   1、作用

   ```
   设置事务
   ```

   2、作用

   ```
   111
   ```

4. 事务操作步骤

   ```
   set  autocomit=false;设置手动提交；
   rollback 回滚；
   commit 提交；
   savepoint  pl 保存；
   rollback to pl 回滚到pl点
   ```

##### 7.2.4.3、操作对象\(事务\)



